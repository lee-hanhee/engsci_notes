\subsection{Learning objectives}
\begin{definition}
    \begin{enumerate}
        \item Construct cash-flow diagrams
        \item Categorize five types of (regular) cash-flows
        \item Explain mathematical, market and decisional equivalence
        \item Calculate the present value of (regular) cash-flows
        \item Perform cash-flow analysis using mathematical equivalence
    \end{enumerate}
\end{definition}

\subsection{Categories of Cash-flows}
\begin{terminology}
    \begin{itemize}
        \item \textbf{First (Capital) Cost:} Expense to build/buy and install.
        \item \textbf{Revenues (Sales):} Receipts from sale of products or services.
        \item \textbf{Operation and Maintenance (O\&M) Costs:} Expenses that are incurred on a regular basis. 
        \item \textbf{Overhaul:} Major (capital) expenditure that occurs part way through the life of an asset. 
        \item \textbf{Salvage Value:} Net receipt at project termination for sale/disposal of equipment.
        \item \textbf{Scrap value:} Value in materials of which item is made.
        \item \textbf{Disposal costs:} Costs to dispose of waste.
        \item \textbf{Project life-cycle costs:} Costs that occur at the start, during or end of a project. 
    \end{itemize}
\end{terminology}

\subsection{Cash-Flow diagrams}
\begin{definition}
    A simple graph that summarizes the \textbf{timing} and \textbf{magnitude} of cash-flows.
    \begin{itemize}
        \item \textbf{X-axis:} Discrete time periods
        \item \textbf{Y-axis (implicit):} Size and direction of cash-flow.
        \item \textbf{Individual cash-flows (arrows):} 
            \begin{itemize}
                \item DOWN arrow is cash OUTFLOW (disbursements)
                \item UP arrow is CASH inflow (receipts)
            \end{itemize}
    \end{itemize}
    \customFigure[0.5]{00_Images/Cash_Flow.png}{Cash flow diagrams.}
\end{definition}

    \subsubsection{Conventions and Assumptions}
    \begin{warning}
        \begin{itemize}
            \item \textbf{The end of one period is the beginning of the next:} $N$ periods from now is end of period $N$ and start of period $N+1$.
            \item \textbf{First costs:} Typically accounted for at \emph{time 0}.
            \item \textbf{Cash-flows:} 
            \begin{itemize}
                \item Assumed to occur at the \emph{end of the period}.
                \item Occuring during the period are \emph{summed} and accounted for at the \emph{end of the period}.
            \end{itemize}
            \item \textbf{Interest:} Compounded once per period (unless specified), so the implication is that you need $r_{x/x}$ to do calculations.
        \end{itemize}
    \end{warning}

\subsection{Types of cash flows}
\begin{definition}
    \begin{itemize}
        \item \textbf{Single payment(s) (receipts):} One-time cash flow at some time or period
        \customFigure[0.5]{00_Images/Single_Payment.png}{Single payment(s) / receipts}
        \item \textbf{Perpetuity:} Cash flow of magnitude \(A\) that occurs at regular intervals until perpetuity (forever)
        \customFigure[0.5]{00_Images/Perpetuity.png}{Perpetuity}
        \item \textbf{Annuity (uniform payments or receipts):} Cash flow of magnitude \(A\) that occurs in regular intervals for \(N\) periods
        \customFigure[0.5]{00_Images/Annuity.png}{Annuity}
        \item \textbf{Arithmetic gradient:} Cash flow of magnitude \(A\) in the first period that grows incrementally each period with magnitude \(G\) up to \(N\) periods, where $A$ or $G$ can be positive or negative.
        \begin{itemize}
            \item Period 1: Mag \(= A\)
            \item Period 2: Mag \(= A + G\)
            \item Period 3: Mag \(= A + 2G\)
            \item Period N: Mag \(= A + (N - 1)G\)
        \end{itemize}
        \customFigure[0.5]{00_Images/Arithmetic_Gradient.png}{Arithmetic gradient with positive A.}
        \item \textbf{Geometric gradient:} Cash flow of magnitude \(A\) in the first period that grows at a rate \(G\) for each period, where $A$ or $G$ can be positive or negative.
        \begin{itemize}
            \item Period 1: Mag \(= A\) 
            \item Period 2: Mag \(= A(1+G)\)
            \item Period 3: Mag \(= A(1+G)^2\)
            \item Period 4: Mag \(= A(1+G)^{N-1}\)
        \end{itemize}
        \customFigure[0.5]{00_Images/Geometric_Gradient.png}{Geometric gradient series for receipts with positive growth}
    \end{itemize}
\end{definition}

\subsection{Equivalence}

\begin{definition}
    \begin{itemize}
        \item \textbf{Mathematical Equivalence:} A consequence of the mathematical relationship between time and money.
        \item \textbf{Market Equivalence:} A consequence of the ability to exchange one cash-flow for another at zero cost.
        \item \textbf{Decisional Equivalence} - Due to indifference on the part of the decision maker among available choices.
    \end{itemize}    
\end{definition}

\begin{intuition}
    \begin{itemize}
        \item You are given a cash flow, but not always do you want to find it in terms of P and F since there are other types of cash flow that you can have. As a result, we can use equivalence factors to find different types of cash flows given another. 
        \item Another common question is finding the present value based on future cash flows to see the worth of the company.
    \end{itemize}    
\end{intuition}
    
    \subsubsection{Mathematical equivalence}
    \begin{definition}

        \textbf{Equivalence in terms of future:}
        \begin{itemize}
            \item Two cash-flows, \( P_t \) at time \( t \) and \( F_{t+N} \) at time \( t+N \), are mathematically equivalent w.r.t. interest rate \( i \), if:
            \begin{equation}
            F_{t+N} = P_t(1 + i)^N 
            \end{equation}
        
            \item If \( F_{t+N+M} \) (where \( M \) is a second number of periods) is equivalent to \( P_t \), then:
            \begin{equation}
            F_{t+N+M} = P_t(1 + i)^{N+M} = F_{t+N}(1 + i)^M 
            \end{equation}
        \end{itemize} 
        
        \textbf{Equivalence in terms of present:}
        \begin{equation}
        P_t = \frac{F_{t+N}}{(1 + i)^N}
        \end{equation}
        
        \begin{equation}
        P_t = \frac{F_{t+N+M}}{(1 + i)^{N+M}}
        \end{equation}

        \customFigure[0.75]{00_Images/Math_Eq.png}{Mathematical equivalence, where each of these cashflows are equivalent.}  
    \end{definition}

    \subsubsection{Market equivalence}
    \begin{definition}
        One can exchange cash-flows between present and future amounts:
        \begin{itemize}
            \item \textbf{Borrowing}: Exchanging a future cash-flow for a present one.
            \item \textbf{Lending/Investing}: Giving up a current cash-flow for a future one.
        \end{itemize}
        
    \end{definition}

    \begin{definition}
        \textbf{T-bill:} A treasury bill is a short-term government dept obligation backed by the government with a maturity of one year or less, sold in denominations of $\$1000$.
        \begin{itemize}
            \item i.e. Government will pay you $\$1000$ by giving the government money presently.
        \end{itemize}
    \end{definition}

    \subsubsection{Decisional equivalence}
    \begin{definition} 
        For a decision maker, two cash-flows, \( P_t \) at time \( t \) and \( F_{t+N} \) at time \( t+N \), are equivalent if the decision maker is indifferent between the two. 
        \begin{itemize}
            \item \textbf{Note:} The interest rate is not a prior information, but implied based on \( P_t \) and \( F_{t+N} \) from the decision that the cash-flows are equivalent.
        \end{itemize}
    \end{definition}

\subsection{Calculate the present value of (regular) cash-flows}
    \subsubsection{Factor approach}
    \begin{warning}
        We assume equivalence:
        \begin{enumerate}
            \item Interest is compounded once per period (i.e. implication on needing $r_{x/x}$ where $x$ is the compounding period)
            \item Cash-flow occurs at the end of the period.
            \item Time 0 is period 0 or the start of period 1.
            \item All periods are the same length.
        \end{enumerate}
    \end{warning}

    \subsubsection{Equivalence Factors}
    \begin{definition}
        \[
        \left(X/Y, \, i, \, N\right) \text{ reads: } \text{What is } X \text{ given } Y, \, i, \, N
        \]
    \end{definition}

    \subsubsection{Factor notation}
    \begin{definition}
        \begin{itemize}
            \item (X/Y, i\%, N) 
            \begin{itemize}
                \item X and Y are chosen from the cash-flow symbols \( P \), \( F \), \( A \), \( G \), and Geom.
            \end{itemize}
            \item If you have Y multiplied by a factor, you get the equivalent value of X: \( X = Y(X/Y, ?, \ldots,?) \).
        \end{itemize}
    \end{definition}

    \subsubsection{Economic equivalence factors}
    \begin{definition}
        Equivalence factors are used to convert between different types of cash flows. 
        \begin{itemize}
            \item \((F/P, i, N)\) \textbf{Compound amount factor}
            \item \((P/F, i, N)\) \textbf{Present worth factor}
            \item \((A/F, i, N)\) \textbf{Sinking fund factor}
            \item \((F/A, i, N)\) \textbf{Series compound amount factor}
            \item \((A/P, i, N)\) \textbf{Capital recovery factor}
            \item \((P/A, i, N)\) \textbf{Series present worth factor}
            \item $(P/G, i, N)$ \textbf{Arithmetic gradient to present worth}
            \item $(P/\text{Geom}, i, g, N)$ \textbf{Geometric gradient to present worth}
        \end{itemize}
    \end{definition}

    \subsubsection{Relationship among factors (Invertibility):}
    \begin{definition}
        \begin{equation}
            \left(X/Y, \, i, \, N\right) = \frac{1}{\left(Y/X, \, i, \, N\right)}
        \end{equation}
    \end{definition}

    \subsubsection{Compound amount factor:}
    \begin{definition}
        \begin{equation}
            \left(F/P, \, i, \, N\right) = (1+i)^N
        \end{equation}
    \end{definition}

    \subsubsection{Present worth factor:}
    \begin{definition}
        \begin{equation}
            \left(P/F, \, i, \, N\right) = \frac{1}{(1+i)^N}
        \end{equation}            
    \end{definition}

    \begin{intuition}
        \begin{itemize}
            \item \textbf{Note:} This equation will always hold to either bring a cash-flow forward (i.e. to the future) by multiplying or bring cash-flow backward (i.e. to the past) by dividing.
        \end{itemize}
    \end{intuition}

    \subsubsection{Present value of a perpetuity (no factor):}
    \begin{definition}
        \begin{equation}
            P = \frac{A}{i}
        \end{equation}
        \begin{itemize}
            \item \textbf{Note:} Present value of this perpetuity is finite.
        \end{itemize}
    \end{definition}

    \begin{derivation}
        Invest $\$100$ and expect to be paid $5\%$ interest per year (money that is paid out to you in cash forever (i.e. perpetuity))
        \customFigure[0.75]{00_Images/PV_Perpetuity.png}{The present value of a perpetuity}
        So the amount of perpetuity per period is $A=Pi$ (i.e. \$5), so the present value of the perpetuity is $P=\frac{A}{i}$
        \begin{itemize}
            \item \textbf{Key:} $A$ is not annuity, it is the perpetuity amount.
        \end{itemize}
    \end{derivation}

    \subsubsection{Series present worth factor (i.e. PV of an annuity):}
    \begin{definition}
        \begin{equation}
            \left(P/A, \, i, \, N\right) = \left[\frac{1}{i} - \frac{1}{i(1+i)^N}\right] = \left[\frac{(1+i)^N - 1}{i(1+i)^N}\right]
        \end{equation}
    \end{definition}

    \begin{derivation}
        What if the lottery only pays $\$A$ per year for $N$ years.
        \begin{itemize}
            \item So by construction, we are finding the PV of an annuity based on the perpetuity. 
            \item For $P_2$, we find $F_N^{(2)}$ first to then use the $P/F$ factor to discount back into the present value at period $1$/
        \end{itemize}
        \customFigure[0.75]{00_Images/Deriving_PV_Annuity.png}{PV of an annuity.}
        \vspace{1em}

        \textbf{Explanation for $F_N$:}

        \begin{itemize}
            \item The perpetuity's payments start at \( N+1 \), but its present value is calculated from the perspective of time \( N \). 
                
            \item The notation \( F_{N+1} \) would indicate the value of the perpetuity at time \( N+1 \), but we are concerned with its value at time \( N \), which is why the discounting factor \( (1+i)^N \) is applied.
                
            \item \( F_N^{(2)} \) is the present value of a perpetuity starting at \( N+1 \), discounted back to period \( N \). Since no payment occurs on period $N$, it is equivalent to $F_{N+1}^{(2)}$
        \end{itemize}
    \end{derivation}

    \subsubsection{Present value of an arithmetic gradient:}
    \begin{definition}
        \begin{equation}
            P = A \left(P/A, \, i, \, N\right) + G \left(P/G, \, i, \, N\right)
        \end{equation}
        \begin{itemize}
            \item Initial annuity $A$ that is constant starting at $t=1$
            \item Growth value $G$ grows arithmetically starting at $t=2$
            \begin{equation*}
                \left(P/G, \, i, \, N\right) = \frac{1}{i^2} \left(1 - \frac{1 + iN}{(1+i)^N}\right)
            \end{equation*}
            \item 4 possibilities besides $G=0$
            \begin{enumerate}
                \item \( A > 0 \) and \( G > 0 \) - means positive and increasing.
                \item \( A > 0 \) and \( G < 0 \) - means positive but decreasing.
                \item \( A < 0 \) and \( G > 0 \) - means negative but becoming less so.
                \item \( A < 0 \) and \( G < 0 \) - means negative and becoming more so.
            \end{enumerate}
        \end{itemize}
    \end{definition}

    \begin{warning}
        \begin{itemize}
            \item Assumes no cash-flow at time $0$.
            \item If cash flow starts at period $1$, then grow from there. Take the first cash flow as annuity, then use the cash flows from period $2$ onwards with $G$.
        \end{itemize}
    \end{warning}
    
    \begin{derivation}
        \customFigure[0.75]{00_Images/PV_AG.png}{Derivation of PV of an arithmetic gradient.}
        \begin{itemize}
            \item \textbf{Note:} Added and subtracted $1/(1+i)^n$ to introduce PV of annuity factor.
            \item \textbf{Highlight:} The highlights show how they connect to the equation deduced by both $1$ and $2$. 
            \item \textbf{P/G:} By definition is the factor that we derived.
            \item \textbf{Equation 1:} 
            \begin{itemize}
                \item We divide by $\frac{1}{(1+i)^a} \; \forall a=1,\ldots,n-1$ because we are discounting back to the present value (i.e. period 0)
                \item We multiply by the $P/A$ factor because it's annuity with an amount $G$.
            \end{itemize}
        \end{itemize}
    \end{derivation}

    \subsubsection{Present value of a geometric series:}
    \begin{definition}
        \begin{equation}
            \left(P/Geom, \, i, \, g, \, N\right) = \frac{1}{1+g} \left(P/A, \, i^0, \, N\right)
        \end{equation}
        \begin{itemize}
            \item $i^o = \frac{1+i}{1+g} - 1$
        \end{itemize}
        \textbf{OR:}
        \begin{equation}
            \left(P/Geom, \, i, \, g, \, N\right) = \frac{1 - \left(\frac{1+g}{1+i}\right)^N}{i - g}
        \end{equation}
        \begin{itemize}
            \item Growth rate: $g$
        \end{itemize}
    \end{definition}

    \begin{derivation}
        There is a cash-flow at the end of period $1$, otherwise what would increase by some $\%$?
        \customFigure[0.75]{00_Images/PV_GS.png}{Derivation of the PV of geometrics series}
        \begin{itemize}
            \item \textbf{Equation 1:} Summing up the cash-flows and discounting them using $P/F$
            \item \textbf{Equation 3:} Making a new interest rate that will expose the $P/A$ factor
        \end{itemize}
    \end{derivation}

\subsection{How to perform cash-flow analysis}
\begin{process}
    \begin{enumerate}
        \item Draw a cash-flow diagrams (optional), but you will get part marks.
        \item Identify variables with corresponding values.
        \item Find the interest rates that are appropriate with the cash-flow diagrams (e.g. if period is in years then must have $r_{y/y}$)
        \item If finding PV, then make sure to discount values using $P/F$ back to the PV time.
    \end{enumerate}
    \begin{itemize}
        \item \textbf{Note:} You can use (1) factor tables, (2) financial calculator, (3) programming calculator.
    \end{itemize}
\end{process}

\begin{warning}
    Any interest rate will work but the period needs to be in terms of the compounding period (i.e. $r_{x/x}$) for the equivalence factors. Or sometimes the question will ask for the values in a certain period (e.g. months)
\end{warning}

\begin{intuition}
    \begin{itemize}
        \item If you are looking for X given Y, but you have Z given Y and X given Z, then multiply as $(X/Y)=(Z/Y)(X/Z)$
        \item Use invertibility when you can.
        \item To discount a value back to the present value, multiply by $(P/F,i,N)$ where N is the amount of time you want to discount back.
    \end{itemize}
\end{intuition}